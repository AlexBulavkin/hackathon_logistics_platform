2024-12-21 20:30:10,449 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 20:30:10,451 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.7558, 37.6173), priority='high', demand=20, items=[ItemInfo(guid='itemA', count=10)], refused=False, origin_warehouse='W1', time_window=(480, 500), service_time=10), DeliveryAddress(id='D2', coord=(55.76, 37.62), priority='medium', demand=15, items=[ItemInfo(guid='itemB', count=5)], refused=False, origin_warehouse='W2', time_window=(490, 510), service_time=15), DeliveryAddress(id='D3', coord=(55.765, 37.625), priority='low', demand=10, items=[ItemInfo(guid='itemC', count=2)], refused=False, origin_warehouse='W1', time_window=(500, 520), service_time=5)] warehouses=[Warehouse(id='W1', coord=(55.75, 37.615), stock={'itemA': 30, 'itemC': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.755, 37.62), stock={'itemB': 20}, capacity=80, usage=30)]
2024-12-21 20:30:10,455 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.7558, 37.6173), Приоритет: high
2024-12-21 20:30:10,457 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.76, 37.62), Приоритет: medium
2024-12-21 20:30:10,459 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.765, 37.625), Приоритет: low
2024-12-21 20:30:20,947 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (480, 500), (490, 510), (500, 520)]
2024-12-21 20:30:20,948 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 10, 15, 5]
2024-12-21 20:30:20,949 - services.optimization - INFO - Спрос: [0, 0, 0, 20, 15, 10]
2024-12-21 20:30:20,950 - services.optimization - INFO - Маршрутные узлы: [0, 1, 3, 4, 5, 2, 0]
2024-12-21 20:30:20,951 - services.optimization - INFO - Времена прибытия: [466, 469, 480, 495, 514, 527, 542]
2024-12-21 20:30:20,953 - services.optimization - INFO - Пропущенные узлы: []
2024-12-21 20:30:20,955 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 20:30:20,956 - services.optimization - INFO -   Склад W1 usage=38/100, stock={'itemA': 20, 'itemC': 8}
2024-12-21 20:30:20,957 - services.optimization - INFO -   Склад W2 usage=25/80, stock={'itemB': 15}
2024-12-21 20:30:20,958 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 20:30:20,960 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.75,37.615;55.7558,37.6173;55.76,37.62;55.765,37.625;55.755,37.62;55.751244,37.618423
2024-12-21 20:30:20,961 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D2', 'D3']
2024-12-21 20:30:20,962 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D2', 'D3']
2024-12-21 20:30:20,964 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 20:30:20,965 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 20:30:20,967 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D2', 'D3'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.75,37.615;55.7558,37.6173;55.76,37.62;55.765,37.625;55.755,37.62;55.751244,37.618423' message='OK'
2024-12-21 20:33:34,177 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 20:33:34,178 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D4', coord=(55.8, 37.64), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(55.81, 37.65), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7)] warehouses=[Warehouse(id='W1', coord=(55.76, 37.615), stock={'itemA': 10, 'itemC': 5}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.765, 37.62), stock={'itemB': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.8, 37.64), stock={'itemD': 10, 'itemE': 5}, capacity=90, usage=40)]
2024-12-21 20:33:34,182 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.8, 37.64), Приоритет: critical
2024-12-21 20:33:34,184 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.81, 37.65), Приоритет: urgent
2024-12-21 20:33:44,353 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (450, 1000), (420, 1100)]
2024-12-21 20:33:44,355 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 7]
2024-12-21 20:33:44,357 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 10, 8]
2024-12-21 20:33:44,358 - services.optimization - INFO - Маршрутные узлы: [0, 1, 2, 4, 3, 5, 0]
2024-12-21 20:33:44,360 - services.optimization - INFO - Времена прибытия: [421, 428, 437, 450, 460, 469, 494]
2024-12-21 20:33:44,361 - services.optimization - INFO - Пропущенные узлы: []
2024-12-21 20:33:44,363 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 20:33:44,365 - services.optimization - INFO -   Склад W1 usage=50/100, stock={'itemA': 10, 'itemC': 5}
2024-12-21 20:33:44,367 - services.optimization - INFO -   Склад W2 usage=30/80, stock={'itemB': 10}
2024-12-21 20:33:44,369 - services.optimization - INFO -   Склад W3 usage=32/90, stock={'itemD': 5, 'itemE': 2}
2024-12-21 20:33:44,370 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 20:33:44,372 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423
2024-12-21 20:33:44,375 - services.optimization - INFO - Фактический порядок доставки: ['D4', 'D5']
2024-12-21 20:33:44,377 - services.optimization - INFO - Ожидаемый порядок доставки: ['D4', 'D5']
2024-12-21 20:33:44,378 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 20:33:44,380 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 20:33:44,381 - routes.logistics - INFO - Ответ отправлен: route_order=['D4', 'D5'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423' message='OK'
2024-12-21 22:03:11,793 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 22:03:11,797 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D4', coord=(55.8, 37.64), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(55.81, 37.65), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7)] warehouses=[Warehouse(id='W1', coord=(55.76, 37.615), stock={'itemA': 10, 'itemC': 5}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.765, 37.62), stock={'itemB': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.8, 37.64), stock={'itemD': 10, 'itemE': 5}, capacity=90, usage=40)]
2024-12-21 22:03:11,803 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.8, 37.64), Приоритет: critical
2024-12-21 22:03:11,808 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.81, 37.65), Приоритет: urgent
2024-12-21 22:03:22,104 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (450, 1000), (420, 1100)]
2024-12-21 22:03:22,109 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 7]
2024-12-21 22:03:22,115 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 10, 8]
2024-12-21 22:03:22,118 - services.optimization - INFO - Маршрутные узлы: [0, 1, 2, 4, 3, 5, 0]
2024-12-21 22:03:22,119 - services.optimization - INFO - Времена прибытия: [421, 428, 437, 450, 460, 469, 494]
2024-12-21 22:03:22,121 - services.optimization - INFO - Пропущенные узлы: []
2024-12-21 22:03:22,124 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 22:03:22,125 - services.optimization - INFO -   Склад W1 usage=50/100, stock={'itemA': 10, 'itemC': 5}
2024-12-21 22:03:22,126 - services.optimization - INFO -   Склад W2 usage=30/80, stock={'itemB': 10}
2024-12-21 22:03:22,128 - services.optimization - INFO -   Склад W3 usage=32/90, stock={'itemD': 5, 'itemE': 2}
2024-12-21 22:03:22,129 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 22:03:22,130 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423
2024-12-21 22:03:22,132 - services.optimization - INFO - Фактический порядок доставки: ['D4', 'D5']
2024-12-21 22:03:22,134 - services.optimization - INFO - Ожидаемый порядок доставки: ['D4', 'D5']
2024-12-21 22:03:22,135 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 22:03:22,137 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 22:03:22,139 - routes.logistics - INFO - Ответ отправлен: route_order=['D4', 'D5'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423' message='OK'
2024-12-21 22:21:50,092 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 22:21:50,095 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D4', coord=(55.8, 37.64), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(55.81, 37.65), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7)] warehouses=[Warehouse(id='W1', coord=(55.76, 37.615), stock={'itemA': 10, 'itemC': 5}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.765, 37.62), stock={'itemB': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.8, 37.64), stock={'itemD': 10, 'itemE': 5}, capacity=90, usage=40)]
2024-12-21 22:21:50,103 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.8, 37.64), Приоритет: critical
2024-12-21 22:21:50,106 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.81, 37.65), Приоритет: urgent
2024-12-21 22:22:00,326 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (450, 1000), (420, 1100)]
2024-12-21 22:22:00,329 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 7]
2024-12-21 22:22:00,331 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 10, 8]
2024-12-21 22:22:00,332 - services.optimization - INFO - Маршрутные узлы: [0, 1, 2, 4, 3, 5, 0]
2024-12-21 22:22:00,335 - services.optimization - INFO - Времена прибытия: [421, 428, 437, 450, 460, 469, 494]
2024-12-21 22:22:00,336 - services.optimization - INFO - Пропущенные узлы: []
2024-12-21 22:22:00,339 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 22:22:00,340 - services.optimization - INFO -   Склад W1 usage=50/100, stock={'itemA': 10, 'itemC': 5}
2024-12-21 22:22:00,343 - services.optimization - INFO -   Склад W2 usage=30/80, stock={'itemB': 10}
2024-12-21 22:22:00,346 - services.optimization - INFO -   Склад W3 usage=32/90, stock={'itemD': 5, 'itemE': 2}
2024-12-21 22:22:00,347 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 22:22:00,349 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423
2024-12-21 22:22:00,352 - services.optimization - INFO - Фактический порядок доставки: ['D4', 'D5']
2024-12-21 22:22:00,354 - services.optimization - INFO - Ожидаемый порядок доставки: ['D4', 'D5']
2024-12-21 22:22:00,357 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 22:22:00,359 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 22:22:00,361 - routes.logistics - INFO - Ответ отправлен: route_order=['D4', 'D5'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.76,37.615;55.765,37.62;55.8,37.64;55.8,37.64;55.81,37.65;55.751244,37.618423' message='OK'
2024-12-21 23:56:52,923 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 23:56:52,927 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.75, 37.61), priority='critical', demand=12, items=[ItemInfo(guid='itemA', count=6)], refused=False, origin_warehouse='W1', time_window=(480, 1020), service_time=8), DeliveryAddress(id='D2', coord=(55.76, 37.62), priority='high', demand=10, items=[ItemInfo(guid='itemB', count=4)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=12), DeliveryAddress(id='D3', coord=(55.77, 37.63), priority='medium', demand=15, items=[ItemInfo(guid='itemC', count=7)], refused=False, origin_warehouse='W1', time_window=(600, 1140), service_time=10), DeliveryAddress(id='D4', coord=(59.9343, 30.3351), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(54.6269, 39.6916), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7), DeliveryAddress(id='D6', coord=(55.78, 37.66), priority='low', demand=5, items=[ItemInfo(guid='itemF', count=2)], refused=False, origin_warehouse='W2', time_window=(600, 1200), service_time=5), DeliveryAddress(id='D7', coord=(59.9343, 30.3351), priority='medium', demand=7, items=[ItemInfo(guid='itemG', count=4)], refused=False, origin_warehouse='W3', time_window=(540, 1050), service_time=6), DeliveryAddress(id='D8', coord=(54.6269, 39.6916), priority='high', demand=20, items=[ItemInfo(guid='itemH', count=8)], refused=False, origin_warehouse='W3', time_window=(480, 1120), service_time=15), DeliveryAddress(id='D9', coord=(55.83, 37.69), priority='urgent', demand=6, items=[ItemInfo(guid='itemI', count=3)], refused=False, origin_warehouse='W2', time_window=(510, 1040), service_time=7), DeliveryAddress(id='D10', coord=(55.84, 37.7), priority='low', demand=9, items=[ItemInfo(guid='itemJ', count=4)], refused=False, origin_warehouse='W1', time_window=(600, 1150), service_time=9)] warehouses=[Warehouse(id='W1', coord=(55.76, 37.615), stock={'itemA': 10, 'itemC': 5, 'itemJ': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.765, 37.62), stock={'itemB': 10, 'itemF': 5, 'itemI': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.8, 37.64), stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}, capacity=90, usage=40)]
2024-12-21 23:56:52,934 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.75, 37.61), Приоритет: critical
2024-12-21 23:56:52,936 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.76, 37.62), Приоритет: high
2024-12-21 23:56:52,938 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.77, 37.63), Приоритет: medium
2024-12-21 23:56:52,942 - services.optimization - INFO - Доставка ID: D4, Координаты: (59.9343, 30.3351), Приоритет: critical
2024-12-21 23:56:52,943 - services.optimization - INFO - Доставка ID: D5, Координаты: (54.6269, 39.6916), Приоритет: urgent
2024-12-21 23:56:52,945 - services.optimization - INFO - Доставка ID: D6, Координаты: (55.78, 37.66), Приоритет: low
2024-12-21 23:56:52,946 - services.optimization - INFO - Доставка ID: D7, Координаты: (59.9343, 30.3351), Приоритет: medium
2024-12-21 23:56:52,948 - services.optimization - INFO - Доставка ID: D8, Координаты: (54.6269, 39.6916), Приоритет: high
2024-12-21 23:56:52,949 - services.optimization - INFO - Доставка ID: D9, Координаты: (55.83, 37.69), Приоритет: urgent
2024-12-21 23:56:52,951 - services.optimization - INFO - Доставка ID: D10, Координаты: (55.84, 37.7), Приоритет: low
2024-12-21 23:57:03,454 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 1020), (540, 1080), (600, 1140), (450, 1000), (420, 1100), (600, 1200), (540, 1050), (480, 1120), (510, 1040), (600, 1150)]
2024-12-21 23:57:03,456 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 8, 12, 10, 10, 7, 5, 6, 15, 7, 9]
2024-12-21 23:57:03,458 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 12, 10, 15, 10, 8, 5, 7, 20, 6, 9]
2024-12-21 23:57:03,459 - services.optimization - INFO - Маршрутные узлы: [0, 4, 1, 8, 12, 3, 5, 2, 9, 13, 0]
2024-12-21 23:57:03,460 - services.optimization - INFO - Времена прибытия: [476, 480, 492, 685, 877, 897, 912, 926, 941, 964, 1000]
2024-12-21 23:57:03,462 - services.optimization - INFO - Пропущенные узлы: [6, 7, 10, 11]
2024-12-21 23:57:03,465 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 23:57:03,467 - services.optimization - INFO -   Склад W1 usage=40/100, stock={'itemA': 4, 'itemC': 5, 'itemJ': 6}
2024-12-21 23:57:03,469 - services.optimization - INFO -   Склад W2 usage=21/80, stock={'itemB': 6, 'itemF': 3, 'itemI': 7}
2024-12-21 23:57:03,471 - services.optimization - INFO -   Склад W3 usage=37/90, stock={'itemD': 10, 'itemE': 2, 'itemG': 8, 'itemH': 20}
2024-12-21 23:57:03,473 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 23:57:03,477 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.75,37.61;55.76,37.615;54.6269,39.6916;55.83,37.69;55.8,37.64;55.76,37.62;55.765,37.62;55.78,37.66;55.84,37.7;55.751244,37.618423
2024-12-21 23:57:03,479 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D5', 'D9', 'D2', 'D6', 'D10']
2024-12-21 23:57:03,482 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D5', 'D9', 'D2', 'D6', 'D10']
2024-12-21 23:57:03,484 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 23:57:03,486 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 23:57:03,488 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D5', 'D9', 'D2', 'D6', 'D10'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.75,37.61;55.76,37.615;54.6269,39.6916;55.83,37.69;55.8,37.64;55.76,37.62;55.765,37.62;55.78,37.66;55.84,37.7;55.751244,37.618423' message='OK'
2024-12-21 23:59:42,728 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-21 23:59:42,731 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.751, 37.62), priority='critical', demand=12, items=[ItemInfo(guid='itemA', count=6)], refused=False, origin_warehouse='W1', time_window=(480, 1020), service_time=8), DeliveryAddress(id='D2', coord=(55.752, 37.622), priority='high', demand=10, items=[ItemInfo(guid='itemB', count=4)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=12), DeliveryAddress(id='D3', coord=(55.753, 37.624), priority='medium', demand=15, items=[ItemInfo(guid='itemC', count=7)], refused=False, origin_warehouse='W1', time_window=(600, 1140), service_time=10), DeliveryAddress(id='D4', coord=(55.754, 37.626), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(55.755, 37.628), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7), DeliveryAddress(id='D6', coord=(55.756, 37.63), priority='low', demand=5, items=[ItemInfo(guid='itemF', count=2)], refused=False, origin_warehouse='W2', time_window=(600, 1200), service_time=5), DeliveryAddress(id='D7', coord=(55.757, 37.632), priority='medium', demand=7, items=[ItemInfo(guid='itemG', count=4)], refused=False, origin_warehouse='W3', time_window=(540, 1050), service_time=6), DeliveryAddress(id='D8', coord=(55.758, 37.634), priority='high', demand=20, items=[ItemInfo(guid='itemH', count=8)], refused=False, origin_warehouse='W3', time_window=(480, 1120), service_time=15), DeliveryAddress(id='D9', coord=(55.759, 37.636), priority='urgent', demand=6, items=[ItemInfo(guid='itemI', count=3)], refused=False, origin_warehouse='W2', time_window=(510, 1040), service_time=7), DeliveryAddress(id='D10', coord=(55.76, 37.638), priority='low', demand=9, items=[ItemInfo(guid='itemJ', count=4)], refused=False, origin_warehouse='W1', time_window=(600, 1150), service_time=9)] warehouses=[Warehouse(id='W1', coord=(55.761, 37.615), stock={'itemA': 10, 'itemC': 5, 'itemJ': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.762, 37.62), stock={'itemB': 10, 'itemF': 5, 'itemI': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.763, 37.625), stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}, capacity=90, usage=40)]
2024-12-21 23:59:42,739 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.751, 37.62), Приоритет: critical
2024-12-21 23:59:42,743 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.752, 37.622), Приоритет: high
2024-12-21 23:59:42,746 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.753, 37.624), Приоритет: medium
2024-12-21 23:59:42,748 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.754, 37.626), Приоритет: critical
2024-12-21 23:59:42,752 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.755, 37.628), Приоритет: urgent
2024-12-21 23:59:42,754 - services.optimization - INFO - Доставка ID: D6, Координаты: (55.756, 37.63), Приоритет: low
2024-12-21 23:59:42,758 - services.optimization - INFO - Доставка ID: D7, Координаты: (55.757, 37.632), Приоритет: medium
2024-12-21 23:59:42,762 - services.optimization - INFO - Доставка ID: D8, Координаты: (55.758, 37.634), Приоритет: high
2024-12-21 23:59:42,764 - services.optimization - INFO - Доставка ID: D9, Координаты: (55.759, 37.636), Приоритет: urgent
2024-12-21 23:59:42,766 - services.optimization - INFO - Доставка ID: D10, Координаты: (55.76, 37.638), Приоритет: low
2024-12-21 23:59:53,116 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 1020), (540, 1080), (600, 1140), (450, 1000), (420, 1100), (600, 1200), (540, 1050), (480, 1120), (510, 1040), (600, 1150)]
2024-12-21 23:59:53,118 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 8, 12, 10, 10, 7, 5, 6, 15, 7, 9]
2024-12-21 23:59:53,120 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 12, 10, 15, 10, 8, 5, 7, 20, 6, 9]
2024-12-21 23:59:53,121 - services.optimization - INFO - Маршрутные узлы: [0, 4, 1, 2, 3, 7, 8, 12, 5, 0]
2024-12-21 23:59:53,123 - services.optimization - INFO - Времена прибытия: [480, 480, 495, 505, 515, 525, 536, 547, 559, 578]
2024-12-21 23:59:53,125 - services.optimization - INFO - Пропущенные узлы: [6, 9, 10, 11, 13]
2024-12-21 23:59:53,128 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-21 23:59:53,130 - services.optimization - INFO -   Склад W1 usage=44/100, stock={'itemA': 4, 'itemC': 5, 'itemJ': 10}
2024-12-21 23:59:53,132 - services.optimization - INFO -   Склад W2 usage=23/80, stock={'itemB': 6, 'itemF': 5, 'itemI': 7}
2024-12-21 23:59:53,135 - services.optimization - INFO -   Склад W3 usage=32/90, stock={'itemD': 5, 'itemE': 2, 'itemG': 8, 'itemH': 20}
2024-12-21 23:59:53,137 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-21 23:59:53,139 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.751,37.62;55.761,37.615;55.762,37.62;55.763,37.625;55.754,37.626;55.755,37.628;55.759,37.636;55.752,37.622;55.751244,37.618423
2024-12-21 23:59:53,140 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D4', 'D5', 'D9', 'D2']
2024-12-21 23:59:53,142 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D4', 'D5', 'D9', 'D2']
2024-12-21 23:59:53,143 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-21 23:59:53,145 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-21 23:59:53,147 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D4', 'D5', 'D9', 'D2'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.751,37.62;55.761,37.615;55.762,37.62;55.763,37.625;55.754,37.626;55.755,37.628;55.759,37.636;55.752,37.622;55.751244,37.618423' message='OK'
2024-12-22 00:03:06,091 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 00:03:06,094 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.751, 37.62), priority='critical', demand=12, items=[ItemInfo(guid='itemA', count=6)], refused=False, origin_warehouse='W1', time_window=(480, 1020), service_time=8), DeliveryAddress(id='D2', coord=(55.752, 37.622), priority='high', demand=10, items=[ItemInfo(guid='itemB', count=4)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=12), DeliveryAddress(id='D3', coord=(55.753, 37.624), priority='medium', demand=15, items=[ItemInfo(guid='itemC', count=7)], refused=False, origin_warehouse='W1', time_window=(600, 1140), service_time=10), DeliveryAddress(id='D4', coord=(55.754, 37.626), priority='critical', demand=10, items=[ItemInfo(guid='itemD', count=5)], refused=False, origin_warehouse='W3', time_window=(450, 1000), service_time=10), DeliveryAddress(id='D5', coord=(55.755, 37.628), priority='urgent', demand=8, items=[ItemInfo(guid='itemE', count=3)], refused=False, origin_warehouse='W3', time_window=(420, 1100), service_time=7), DeliveryAddress(id='D6', coord=(55.756, 37.63), priority='low', demand=5, items=[ItemInfo(guid='itemF', count=2)], refused=False, origin_warehouse='W2', time_window=(600, 1200), service_time=5), DeliveryAddress(id='D7', coord=(55.757, 37.632), priority='medium', demand=7, items=[ItemInfo(guid='itemG', count=4)], refused=False, origin_warehouse='W3', time_window=(540, 1050), service_time=6), DeliveryAddress(id='D8', coord=(55.758, 37.634), priority='high', demand=20, items=[ItemInfo(guid='itemH', count=8)], refused=False, origin_warehouse='W3', time_window=(480, 1120), service_time=15), DeliveryAddress(id='D9', coord=(55.759, 37.636), priority='urgent', demand=6, items=[ItemInfo(guid='itemI', count=3)], refused=False, origin_warehouse='W2', time_window=(510, 1040), service_time=7), DeliveryAddress(id='D10', coord=(55.76, 37.638), priority='low', demand=9, items=[ItemInfo(guid='itemJ', count=4)], refused=False, origin_warehouse='W1', time_window=(600, 1150), service_time=9), DeliveryAddress(id='D11', coord=(55.761, 37.64), priority='critical', demand=11, items=[ItemInfo(guid='itemK', count=5)], refused=False, origin_warehouse='W1', time_window=(500, 1000), service_time=10), DeliveryAddress(id='D12', coord=(55.762, 37.642), priority='high', demand=13, items=[ItemInfo(guid='itemL', count=6)], refused=False, origin_warehouse='W2', time_window=(520, 1040), service_time=12), DeliveryAddress(id='D13', coord=(55.763, 37.644), priority='medium', demand=14, items=[ItemInfo(guid='itemM', count=7)], refused=False, origin_warehouse='W3', time_window=(530, 1060), service_time=8), DeliveryAddress(id='D14', coord=(55.764, 37.646), priority='critical', demand=9, items=[ItemInfo(guid='itemN', count=4)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=9), DeliveryAddress(id='D15', coord=(55.765, 37.648), priority='urgent', demand=12, items=[ItemInfo(guid='itemO', count=5)], refused=False, origin_warehouse='W3', time_window=(550, 1100), service_time=10), DeliveryAddress(id='D16', coord=(55.766, 37.65), priority='low', demand=8, items=[ItemInfo(guid='itemP', count=3)], refused=False, origin_warehouse='W1', time_window=(560, 1120), service_time=6), DeliveryAddress(id='D17', coord=(55.767, 37.652), priority='medium', demand=14, items=[ItemInfo(guid='itemQ', count=7)], refused=False, origin_warehouse='W2', time_window=(570, 1140), service_time=7), DeliveryAddress(id='D18', coord=(55.768, 37.654), priority='high', demand=10, items=[ItemInfo(guid='itemR', count=4)], refused=False, origin_warehouse='W3', time_window=(580, 1160), service_time=10), DeliveryAddress(id='D19', coord=(55.769, 37.656), priority='urgent', demand=11, items=[ItemInfo(guid='itemS', count=5)], refused=False, origin_warehouse='W1', time_window=(590, 1180), service_time=9), DeliveryAddress(id='D20', coord=(55.77, 37.658), priority='low', demand=13, items=[ItemInfo(guid='itemT', count=6)], refused=False, origin_warehouse='W2', time_window=(600, 1200), service_time=10)] warehouses=[Warehouse(id='W1', coord=(55.761, 37.615), stock={'itemA': 10, 'itemC': 5, 'itemJ': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.762, 37.62), stock={'itemB': 10, 'itemF': 5, 'itemI': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.763, 37.625), stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}, capacity=90, usage=40)]
2024-12-22 00:03:06,106 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.751, 37.62), Приоритет: critical
2024-12-22 00:03:06,109 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.752, 37.622), Приоритет: high
2024-12-22 00:03:06,111 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.753, 37.624), Приоритет: medium
2024-12-22 00:03:06,113 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.754, 37.626), Приоритет: critical
2024-12-22 00:03:06,118 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.755, 37.628), Приоритет: urgent
2024-12-22 00:03:06,141 - services.optimization - INFO - Доставка ID: D6, Координаты: (55.756, 37.63), Приоритет: low
2024-12-22 00:03:06,142 - services.optimization - INFO - Доставка ID: D7, Координаты: (55.757, 37.632), Приоритет: medium
2024-12-22 00:03:06,144 - services.optimization - INFO - Доставка ID: D8, Координаты: (55.758, 37.634), Приоритет: high
2024-12-22 00:03:06,161 - services.optimization - INFO - Доставка ID: D9, Координаты: (55.759, 37.636), Приоритет: urgent
2024-12-22 00:03:06,162 - services.optimization - INFO - Доставка ID: D10, Координаты: (55.76, 37.638), Приоритет: low
2024-12-22 00:03:06,164 - services.optimization - INFO - Доставка ID: D11, Координаты: (55.761, 37.64), Приоритет: critical
2024-12-22 00:03:06,166 - services.optimization - INFO - Доставка ID: D12, Координаты: (55.762, 37.642), Приоритет: high
2024-12-22 00:03:06,167 - services.optimization - INFO - Доставка ID: D13, Координаты: (55.763, 37.644), Приоритет: medium
2024-12-22 00:03:06,169 - services.optimization - INFO - Доставка ID: D14, Координаты: (55.764, 37.646), Приоритет: critical
2024-12-22 00:03:06,177 - services.optimization - INFO - Доставка ID: D15, Координаты: (55.765, 37.648), Приоритет: urgent
2024-12-22 00:03:06,180 - services.optimization - INFO - Доставка ID: D16, Координаты: (55.766, 37.65), Приоритет: low
2024-12-22 00:03:06,182 - services.optimization - INFO - Доставка ID: D17, Координаты: (55.767, 37.652), Приоритет: medium
2024-12-22 00:03:06,183 - services.optimization - INFO - Доставка ID: D18, Координаты: (55.768, 37.654), Приоритет: high
2024-12-22 00:03:06,184 - services.optimization - INFO - Доставка ID: D19, Координаты: (55.769, 37.656), Приоритет: urgent
2024-12-22 00:03:06,186 - services.optimization - INFO - Доставка ID: D20, Координаты: (55.77, 37.658), Приоритет: low
2024-12-22 00:03:16,582 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 1020), (540, 1080), (600, 1140), (450, 1000), (420, 1100), (600, 1200), (540, 1050), (480, 1120), (510, 1040), (600, 1150), (500, 1000), (520, 1040), (530, 1060), (540, 1080), (550, 1100), (560, 1120), (570, 1140), (580, 1160), (590, 1180), (600, 1200)]
2024-12-22 00:03:16,585 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 8, 12, 10, 10, 7, 5, 6, 15, 7, 9, 10, 12, 8, 9, 10, 6, 7, 10, 9, 10]
2024-12-22 00:03:16,586 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 12, 10, 15, 10, 8, 5, 7, 20, 6, 9, 11, 13, 14, 9, 12, 8, 14, 10, 11, 13]
2024-12-22 00:03:16,588 - services.optimization - INFO - Маршрутные узлы: [0, 4, 1, 2, 14, 17, 3, 7, 8, 0]
2024-12-22 00:03:16,589 - services.optimization - INFO - Времена прибытия: [491, 491, 506, 516, 526, 540, 555, 565, 576, 590]
2024-12-22 00:03:16,591 - services.optimization - INFO - Пропущенные узлы: [5, 6, 9, 10, 11, 12, 13, 15, 16, 18, 19, 20, 21, 22, 23]
2024-12-22 00:03:16,593 - services.optimization - ERROR - Недостаточно товара itemK на складе W1. Требуется: 5, доступно: 0
2024-12-22 00:03:16,594 - services.optimization - ERROR - Недостаточно товара itemN на складе W2. Требуется: 4, доступно: 0
2024-12-22 00:03:16,596 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 00:03:16,598 - services.optimization - INFO -   Склад W1 usage=39/100, stock={'itemA': 4, 'itemC': 5, 'itemJ': 10}
2024-12-22 00:03:16,600 - services.optimization - INFO -   Склад W2 usage=26/80, stock={'itemB': 10, 'itemF': 5, 'itemI': 10}
2024-12-22 00:03:16,603 - services.optimization - INFO -   Склад W3 usage=32/90, stock={'itemD': 5, 'itemE': 2, 'itemG': 8, 'itemH': 20}
2024-12-22 00:03:16,605 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 00:03:16,607 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.751,37.62;55.761,37.615;55.762,37.62;55.761,37.64;55.764,37.646;55.763,37.625;55.754,37.626;55.755,37.628;55.751244,37.618423
2024-12-22 00:03:16,609 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D11', 'D14', 'D4', 'D5']
2024-12-22 00:03:16,611 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D4', 'D11', 'D14', 'D5']
2024-12-22 00:03:16,613 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 00:03:16,616 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 00:03:16,617 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D11', 'D14', 'D4', 'D5'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.751,37.62;55.761,37.615;55.762,37.62;55.761,37.64;55.764,37.646;55.763,37.625;55.754,37.626;55.755,37.628;55.751244,37.618423' message='OK'
2024-12-22 00:09:27,613 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 00:09:27,615 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.715248, 37.669947), priority='critical', demand=10, items=[ItemInfo(guid='itemA', count=4)], refused=False, origin_warehouse='W1', time_window=(480, 1020), service_time=10), DeliveryAddress(id='D2', coord=(56.123747, 40.375502), priority='high', demand=8, items=[ItemInfo(guid='itemB', count=3)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=8), DeliveryAddress(id='D3', coord=(55.870906, 41.773002), priority='medium', demand=15, items=[ItemInfo(guid='itemC', count=5)], refused=False, origin_warehouse='W3', time_window=(600, 1140), service_time=12)] warehouses=[Warehouse(id='W1', coord=(55.761, 37.615), stock={'itemA': 10, 'itemC': 5, 'itemJ': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.762, 37.62), stock={'itemB': 10, 'itemF': 5, 'itemI': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.763, 37.625), stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}, capacity=90, usage=40)]
2024-12-22 00:09:27,619 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.715248, 37.669947), Приоритет: critical
2024-12-22 00:09:27,620 - services.optimization - INFO - Доставка ID: D2, Координаты: (56.123747, 40.375502), Приоритет: high
2024-12-22 00:09:27,624 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.870906, 41.773002), Приоритет: medium
2024-12-22 00:09:38,102 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 1020), (540, 1080), (600, 1140)]
2024-12-22 00:09:38,104 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 8, 12]
2024-12-22 00:09:38,105 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 10, 8, 15]
2024-12-22 00:09:38,106 - services.optimization - INFO - Маршрутные узлы: [0, 1, 2, 3, 4, 5, 6, 0]
2024-12-22 00:09:38,108 - services.optimization - INFO - Времена прибытия: [433, 440, 450, 460, 480, 661, 788, 1090]
2024-12-22 00:09:38,110 - services.optimization - INFO - Пропущенные узлы: []
2024-12-22 00:09:38,114 - services.optimization - ERROR - Недостаточно товара itemC на складе W3. Требуется: 5, доступно: 0
2024-12-22 00:09:38,117 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 00:09:38,119 - services.optimization - INFO -   Склад W1 usage=46/100, stock={'itemA': 6, 'itemC': 5, 'itemJ': 10}
2024-12-22 00:09:38,120 - services.optimization - INFO -   Склад W2 usage=27/80, stock={'itemB': 7, 'itemF': 5, 'itemI': 10}
2024-12-22 00:09:38,121 - services.optimization - INFO -   Склад W3 usage=35/90, stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}
2024-12-22 00:09:38,122 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 00:09:38,124 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.761,37.615;55.762,37.62;55.763,37.625;55.715248,37.669947;56.123747,40.375502;55.870906,41.773002;55.751244,37.618423
2024-12-22 00:09:38,126 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D2', 'D3']
2024-12-22 00:09:38,127 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D2', 'D3']
2024-12-22 00:09:38,128 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 00:09:38,129 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 00:09:38,130 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D2', 'D3'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.761,37.615;55.762,37.62;55.763,37.625;55.715248,37.669947;56.123747,40.375502;55.870906,41.773002;55.751244,37.618423' message='OK'
2024-12-22 00:10:09,123 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 00:10:09,125 - services.optimization - INFO - Получены данные: depot_coord=(55.751244, 37.618423) vehicle_capacity=50 deliveries=[DeliveryAddress(id='D1', coord=(55.715248, 37.669947), priority='critical', demand=10, items=[ItemInfo(guid='itemA', count=4)], refused=False, origin_warehouse='W1', time_window=(480, 1020), service_time=10), DeliveryAddress(id='D2', coord=(56.123747, 40.375502), priority='high', demand=8, items=[ItemInfo(guid='itemB', count=3)], refused=False, origin_warehouse='W2', time_window=(540, 1080), service_time=8), DeliveryAddress(id='D3', coord=(55.870906, 41.773002), priority='medium', demand=15, items=[ItemInfo(guid='itemC', count=5)], refused=False, origin_warehouse='W3', time_window=(600, 1140), service_time=12)] warehouses=[Warehouse(id='W1', coord=(55.761, 37.615), stock={'itemA': 10, 'itemC': 5, 'itemJ': 10}, capacity=100, usage=50), Warehouse(id='W2', coord=(55.762, 37.62), stock={'itemB': 10, 'itemF': 5, 'itemI': 10}, capacity=80, usage=30), Warehouse(id='W3', coord=(55.763, 37.625), stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}, capacity=90, usage=40)]
2024-12-22 00:10:09,130 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.715248, 37.669947), Приоритет: critical
2024-12-22 00:10:09,132 - services.optimization - INFO - Доставка ID: D2, Координаты: (56.123747, 40.375502), Приоритет: high
2024-12-22 00:10:09,135 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.870906, 41.773002), Приоритет: medium
2024-12-22 00:10:19,362 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 1020), (540, 1080), (600, 1140)]
2024-12-22 00:10:19,364 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 8, 12]
2024-12-22 00:10:19,365 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 10, 8, 15]
2024-12-22 00:10:19,366 - services.optimization - INFO - Маршрутные узлы: [0, 1, 2, 3, 4, 5, 6, 0]
2024-12-22 00:10:19,367 - services.optimization - INFO - Времена прибытия: [433, 440, 450, 460, 480, 661, 788, 1090]
2024-12-22 00:10:19,369 - services.optimization - INFO - Пропущенные узлы: []
2024-12-22 00:10:19,371 - services.optimization - ERROR - Недостаточно товара itemC на складе W3. Требуется: 5, доступно: 0
2024-12-22 00:10:19,374 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 00:10:19,376 - services.optimization - INFO -   Склад W1 usage=46/100, stock={'itemA': 6, 'itemC': 5, 'itemJ': 10}
2024-12-22 00:10:19,378 - services.optimization - INFO -   Склад W2 usage=27/80, stock={'itemB': 7, 'itemF': 5, 'itemI': 10}
2024-12-22 00:10:19,379 - services.optimization - INFO -   Склад W3 usage=35/90, stock={'itemD': 10, 'itemE': 5, 'itemG': 8, 'itemH': 20}
2024-12-22 00:10:19,381 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 00:10:19,383 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.761,37.615;55.762,37.62;55.763,37.625;55.715248,37.669947;56.123747,40.375502;55.870906,41.773002;55.751244,37.618423
2024-12-22 00:10:19,385 - services.optimization - INFO - Фактический порядок доставки: ['D1', 'D2', 'D3']
2024-12-22 00:10:19,387 - services.optimization - INFO - Ожидаемый порядок доставки: ['D1', 'D2', 'D3']
2024-12-22 00:10:19,388 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 00:10:19,390 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 00:10:19,391 - routes.logistics - INFO - Ответ отправлен: route_order=['D1', 'D2', 'D3'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.751244,37.618423;55.761,37.615;55.762,37.62;55.763,37.625;55.715248,37.669947;56.123747,40.375502;55.870906,41.773002;55.751244,37.618423' message='OK'
2024-12-22 12:57:41,652 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 12:57:41,655 - services.optimization - INFO - Получены данные: depot_coord=(55.7522, 37.6156) vehicle_capacity=20 deliveries=[DeliveryAddress(id='1', coord=(55.7601, 37.62), priority='high', demand=3, items=[ItemInfo(guid='item1', count=3)], refused=False, origin_warehouse='WH1', time_window=(480, 720), service_time=10), DeliveryAddress(id='2', coord=(55.7518, 37.6173), priority='medium', demand=1, items=[ItemInfo(guid='item2', count=1)], refused=False, origin_warehouse='WH1', time_window=(600, 840), service_time=5), DeliveryAddress(id='3', coord=(55.7432, 37.6056), priority='low', demand=2, items=[ItemInfo(guid='item3', count=2)], refused=False, origin_warehouse='WH2', time_window=(540, 900), service_time=8), DeliveryAddress(id='4', coord=(55.7643, 37.6345), priority='medium', demand=4, items=[ItemInfo(guid='item4', count=4)], refused=False, origin_warehouse='WH3', time_window=(480, 1020), service_time=15), DeliveryAddress(id='5', coord=(55.7515, 37.6438), priority='high', demand=1, items=[ItemInfo(guid='item5', count=1)], refused=False, origin_warehouse='WH1', time_window=(300, 600), service_time=5), DeliveryAddress(id='6', coord=(55.7361, 37.6258), priority='low', demand=3, items=[ItemInfo(guid='item6', count=3)], refused=False, origin_warehouse='WH2', time_window=(720, 1080), service_time=10), DeliveryAddress(id='7', coord=(55.7525, 37.6), priority='medium', demand=2, items=[ItemInfo(guid='item7', count=2)], refused=False, origin_warehouse='WH3', time_window=(360, 960), service_time=12), DeliveryAddress(id='8', coord=(55.77, 37.59), priority='high', demand=5, items=[ItemInfo(guid='item8', count=5)], refused=False, origin_warehouse='WH1', time_window=(600, 840), service_time=20), DeliveryAddress(id='9', coord=(55.74, 37.67), priority='low', demand=2, items=[ItemInfo(guid='item9', count=2)], refused=False, origin_warehouse='WH2', time_window=(480, 1080), service_time=15), DeliveryAddress(id='10', coord=(55.7605, 37.6456), priority='medium', demand=3, items=[ItemInfo(guid='item10', count=3)], refused=False, origin_warehouse='WH3', time_window=(540, 900), service_time=10)] warehouses=[Warehouse(id='WH1', coord=(55.753, 37.62), stock={'item1': 10, 'item2': 20, 'item5': 15}, capacity=200, usage=50), Warehouse(id='WH2', coord=(55.74, 37.6), stock={'item3': 30, 'item6': 25, 'item9': 10}, capacity=150, usage=60), Warehouse(id='WH3', coord=(55.76, 37.63), stock={'item4': 20, 'item7': 18, 'item10': 5}, capacity=180, usage=40)]
2024-12-22 12:57:41,665 - services.optimization - INFO - Доставка ID: 1, Координаты: (55.7601, 37.62), Приоритет: high
2024-12-22 12:57:41,667 - services.optimization - INFO - Доставка ID: 2, Координаты: (55.7518, 37.6173), Приоритет: medium
2024-12-22 12:57:41,668 - services.optimization - INFO - Доставка ID: 3, Координаты: (55.7432, 37.6056), Приоритет: low
2024-12-22 12:57:41,669 - services.optimization - INFO - Доставка ID: 4, Координаты: (55.7643, 37.6345), Приоритет: medium
2024-12-22 12:57:41,670 - services.optimization - INFO - Доставка ID: 5, Координаты: (55.7515, 37.6438), Приоритет: high
2024-12-22 12:57:41,672 - services.optimization - INFO - Доставка ID: 6, Координаты: (55.7361, 37.6258), Приоритет: low
2024-12-22 12:57:41,674 - services.optimization - INFO - Доставка ID: 7, Координаты: (55.7525, 37.6), Приоритет: medium
2024-12-22 12:57:41,678 - services.optimization - INFO - Доставка ID: 8, Координаты: (55.77, 37.59), Приоритет: high
2024-12-22 12:57:41,679 - services.optimization - INFO - Доставка ID: 9, Координаты: (55.74, 37.67), Приоритет: low
2024-12-22 12:57:41,681 - services.optimization - INFO - Доставка ID: 10, Координаты: (55.7605, 37.6456), Приоритет: medium
2024-12-22 12:57:52,059 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (480, 720), (600, 840), (540, 900), (480, 1020), (300, 600), (720, 1080), (360, 960), (600, 840), (480, 1080), (540, 900)]
2024-12-22 12:57:52,061 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 5, 8, 15, 5, 10, 12, 20, 15, 10]
2024-12-22 12:57:52,063 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 3, 1, 2, 4, 1, 3, 2, 5, 2, 3]
2024-12-22 12:57:52,064 - services.optimization - INFO - Маршрутные узлы: [0, 8, 4, 11, 10, 2, 5, 13, 3, 1, 9, 6, 0]
2024-12-22 12:57:52,065 - services.optimization - INFO - Времена прибытия: [578, 588, 602, 620, 647, 663, 675, 690, 703, 711, 720, 737, 751]
2024-12-22 12:57:52,066 - services.optimization - INFO - Пропущенные узлы: [7, 12]
2024-12-22 12:57:52,070 - services.optimization - ERROR - Недостаточно товара item8 на складе WH1. Требуется: 5, доступно: 0
2024-12-22 12:57:52,072 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 12:57:52,074 - services.optimization - INFO -   Склад WH1 usage=40/200, stock={'item1': 7, 'item2': 19, 'item5': 14}
2024-12-22 12:57:52,076 - services.optimization - INFO -   Склад WH2 usage=55/150, stock={'item3': 28, 'item6': 22, 'item9': 10}
2024-12-22 12:57:52,078 - services.optimization - INFO -   Склад WH3 usage=35/180, stock={'item4': 20, 'item7': 16, 'item10': 2}
2024-12-22 12:57:52,080 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 12:57:52,082 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.7522,37.6156;55.7515,37.6438;55.7601,37.62;55.77,37.59;55.7525,37.6;55.74,37.6;55.7518,37.6173;55.7605,37.6456;55.76,37.63;55.753,37.62;55.7361,37.6258;55.7432,37.6056;55.7522,37.6156
2024-12-22 12:57:52,086 - services.optimization - INFO - Фактический порядок доставки: ['5', '1', '8', '7', '2', '10', '6', '3']
2024-12-22 12:57:52,088 - services.optimization - INFO - Ожидаемый порядок доставки: ['1', '5', '8', '2', '7', '10', '3', '6']
2024-12-22 12:57:52,090 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 12:57:52,091 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 12:57:52,093 - routes.logistics - INFO - Ответ отправлен: route_order=['5', '1', '8', '7', '2', '10', '6', '3'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.7522,37.6156;55.7515,37.6438;55.7601,37.62;55.77,37.59;55.7525,37.6;55.74,37.6;55.7518,37.6173;55.7605,37.6456;55.76,37.63;55.753,37.62;55.7361,37.6258;55.7432,37.6056;55.7522,37.6156' message='OK'
2024-12-22 13:02:07,451 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 13:02:07,453 - services.optimization - INFO - Получены данные: depot_coord=(55.7963, 49.1088) vehicle_capacity=30 deliveries=[DeliveryAddress(id='D1', coord=(55.801, 49.1106), priority='medium', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH1', time_window=(600, 840), service_time=10), DeliveryAddress(id='D2', coord=(55.7885, 49.1212), priority='high', demand=4, items=[ItemInfo(guid='furniture', count=1), ItemInfo(guid='electronics', count=3)], refused=False, origin_warehouse='WH1', time_window=(480, 720), service_time=20), DeliveryAddress(id='D3', coord=(55.7801, 49.1675), priority='low', demand=1, items=[ItemInfo(guid='clothing', count=1)], refused=False, origin_warehouse='WH2', time_window=(540, 1020), service_time=5), DeliveryAddress(id='D4', coord=(55.8117, 49.051), priority='medium', demand=3, items=[ItemInfo(guid='food', count=3)], refused=False, origin_warehouse='WH2', time_window=(480, 900), service_time=15), DeliveryAddress(id='D5', coord=(55.854, 49.1065), priority='high', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH3', time_window=(600, 840), service_time=12), DeliveryAddress(id='D6', coord=(55.7468, 49.1635), priority='low', demand=5, items=[ItemInfo(guid='furniture', count=5)], refused=False, origin_warehouse='WH2', time_window=(720, 1080), service_time=25), DeliveryAddress(id='D7', coord=(55.809, 49.13), priority='medium', demand=3, items=[ItemInfo(guid='clothing', count=3)], refused=False, origin_warehouse='WH3', time_window=(540, 960), service_time=10), DeliveryAddress(id='D8', coord=(55.8222, 49.0789), priority='high', demand=6, items=[ItemInfo(guid='food', count=6)], refused=False, origin_warehouse='WH1', time_window=(480, 720), service_time=20), DeliveryAddress(id='D9', coord=(55.792, 49.145), priority='low', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH3', time_window=(600, 1080), service_time=8), DeliveryAddress(id='D10', coord=(55.83, 49.15), priority='medium', demand=1, items=[ItemInfo(guid='clothing', count=1)], refused=False, origin_warehouse='WH1', time_window=(360, 780), service_time=5)] warehouses=[Warehouse(id='WH1', coord=(55.7974, 49.1069), stock={'electronics': 30, 'furniture': 15, 'clothing': 25, 'food': 20}, capacity=250, usage=80), Warehouse(id='WH2', coord=(55.765, 49.168), stock={'furniture': 20, 'food': 30, 'clothing': 10}, capacity=200, usage=70), Warehouse(id='WH3', coord=(55.812, 49.12), stock={'electronics': 40, 'clothing': 15, 'furniture': 5}, capacity=180, usage=50)]
2024-12-22 13:02:07,461 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.801, 49.1106), Приоритет: medium
2024-12-22 13:02:07,463 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.7885, 49.1212), Приоритет: high
2024-12-22 13:02:07,464 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.7801, 49.1675), Приоритет: low
2024-12-22 13:02:07,465 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.8117, 49.051), Приоритет: medium
2024-12-22 13:02:07,466 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.854, 49.1065), Приоритет: high
2024-12-22 13:02:07,468 - services.optimization - INFO - Доставка ID: D6, Координаты: (55.7468, 49.1635), Приоритет: low
2024-12-22 13:02:07,472 - services.optimization - INFO - Доставка ID: D7, Координаты: (55.809, 49.13), Приоритет: medium
2024-12-22 13:02:07,475 - services.optimization - INFO - Доставка ID: D8, Координаты: (55.8222, 49.0789), Приоритет: high
2024-12-22 13:02:07,477 - services.optimization - INFO - Доставка ID: D9, Координаты: (55.792, 49.145), Приоритет: low
2024-12-22 13:02:07,479 - services.optimization - INFO - Доставка ID: D10, Координаты: (55.83, 49.15), Приоритет: medium
2024-12-22 13:02:17,654 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (600, 840), (480, 720), (540, 1020), (480, 900), (600, 840), (720, 1080), (540, 960), (480, 720), (600, 1080), (360, 780)]
2024-12-22 13:02:17,656 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 20, 5, 15, 12, 25, 10, 20, 8, 5]
2024-12-22 13:02:17,657 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 2, 4, 1, 3, 2, 5, 3, 6, 2, 1]
2024-12-22 13:02:17,658 - services.optimization - INFO - Маршрутные узлы: [0, 1, 5, 8, 11, 7, 3, 13, 10, 4, 12, 6, 2, 9, 0]
2024-12-22 13:02:17,659 - services.optimization - INFO - Времена прибытия: [552, 553, 563, 600, 624, 650, 674, 686, 699, 719, 737, 751, 762, 775, 811]
2024-12-22 13:02:17,661 - services.optimization - INFO - Пропущенные узлы: []
2024-12-22 13:02:17,662 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 13:02:17,664 - services.optimization - INFO -   Склад WH1 usage=67/250, stock={'electronics': 25, 'furniture': 14, 'clothing': 24, 'food': 14}
2024-12-22 13:02:17,666 - services.optimization - INFO -   Склад WH2 usage=61/200, stock={'furniture': 15, 'food': 27, 'clothing': 9}
2024-12-22 13:02:17,668 - services.optimization - INFO -   Склад WH3 usage=43/180, stock={'electronics': 36, 'clothing': 12, 'furniture': 5}
2024-12-22 13:02:17,670 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 13:02:17,672 - services.optimization - INFO - Сгенерированный URL для OSM: https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.7963,49.1088;55.7974,49.1069;55.7885,49.1212;55.854,49.1065;55.8222,49.0789;55.8117,49.051;55.812,49.12;55.83,49.15;55.809,49.13;55.801,49.1106;55.792,49.145;55.7801,49.1675;55.765,49.168;55.7468,49.1635;55.7963,49.1088
2024-12-22 13:02:17,674 - services.optimization - INFO - Фактический порядок доставки: ['D2', 'D5', 'D8', 'D4', 'D10', 'D7', 'D1', 'D9', 'D3', 'D6']
2024-12-22 13:02:17,675 - services.optimization - INFO - Ожидаемый порядок доставки: ['D2', 'D5', 'D8', 'D1', 'D4', 'D7', 'D10', 'D3', 'D6', 'D9']
2024-12-22 13:02:17,677 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 13:02:17,679 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 13:02:17,681 - routes.logistics - INFO - Ответ отправлен: route_order=['D2', 'D5', 'D8', 'D4', 'D10', 'D7', 'D1', 'D9', 'D3', 'D6'] osm_url='https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=55.7963,49.1088;55.7974,49.1069;55.7885,49.1212;55.854,49.1065;55.8222,49.0789;55.8117,49.051;55.812,49.12;55.83,49.15;55.809,49.13;55.801,49.1106;55.792,49.145;55.7801,49.1675;55.765,49.168;55.7468,49.1635;55.7963,49.1088' message='OK'
2024-12-22 13:35:43,566 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 13:35:43,568 - services.optimization - INFO - Получены данные: depot_coord=(55.7963, 49.1088) vehicle_capacity=30 deliveries=[DeliveryAddress(id='D1', coord=(55.801, 49.1106), priority='medium', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH1', time_window=(600, 840), service_time=10), DeliveryAddress(id='D2', coord=(55.7885, 49.1212), priority='high', demand=4, items=[ItemInfo(guid='furniture', count=1), ItemInfo(guid='electronics', count=3)], refused=False, origin_warehouse='WH1', time_window=(480, 720), service_time=20), DeliveryAddress(id='D3', coord=(55.7801, 49.1675), priority='low', demand=1, items=[ItemInfo(guid='clothing', count=1)], refused=False, origin_warehouse='WH2', time_window=(540, 1020), service_time=5), DeliveryAddress(id='D4', coord=(55.8117, 49.051), priority='medium', demand=3, items=[ItemInfo(guid='food', count=3)], refused=False, origin_warehouse='WH2', time_window=(480, 900), service_time=15), DeliveryAddress(id='D5', coord=(55.854, 49.1065), priority='high', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH3', time_window=(600, 840), service_time=12), DeliveryAddress(id='D6', coord=(55.7468, 49.1635), priority='low', demand=5, items=[ItemInfo(guid='furniture', count=5)], refused=False, origin_warehouse='WH2', time_window=(720, 1080), service_time=25), DeliveryAddress(id='D7', coord=(55.809, 49.13), priority='medium', demand=3, items=[ItemInfo(guid='clothing', count=3)], refused=False, origin_warehouse='WH3', time_window=(540, 960), service_time=10), DeliveryAddress(id='D8', coord=(55.8222, 49.0789), priority='high', demand=6, items=[ItemInfo(guid='food', count=6)], refused=False, origin_warehouse='WH1', time_window=(480, 720), service_time=20), DeliveryAddress(id='D9', coord=(55.792, 49.145), priority='low', demand=2, items=[ItemInfo(guid='electronics', count=2)], refused=False, origin_warehouse='WH3', time_window=(600, 1080), service_time=8), DeliveryAddress(id='D10', coord=(55.83, 49.15), priority='medium', demand=1, items=[ItemInfo(guid='clothing', count=1)], refused=False, origin_warehouse='WH1', time_window=(360, 780), service_time=5)] warehouses=[Warehouse(id='WH1', coord=(55.7974, 49.1069), stock={'electronics': 30, 'furniture': 15, 'clothing': 25, 'food': 20}, capacity=250, usage=80), Warehouse(id='WH2', coord=(55.765, 49.168), stock={'furniture': 20, 'food': 30, 'clothing': 10}, capacity=200, usage=70), Warehouse(id='WH3', coord=(55.812, 49.12), stock={'electronics': 40, 'clothing': 15, 'furniture': 5}, capacity=180, usage=50)]
2024-12-22 13:35:43,576 - services.optimization - INFO - Доставка ID: D1, Координаты: (55.801, 49.1106), Приоритет: medium
2024-12-22 13:35:43,578 - services.optimization - INFO - Доставка ID: D2, Координаты: (55.7885, 49.1212), Приоритет: high
2024-12-22 13:35:43,579 - services.optimization - INFO - Доставка ID: D3, Координаты: (55.7801, 49.1675), Приоритет: low
2024-12-22 13:35:43,581 - services.optimization - INFO - Доставка ID: D4, Координаты: (55.8117, 49.051), Приоритет: medium
2024-12-22 13:35:43,583 - services.optimization - INFO - Доставка ID: D5, Координаты: (55.854, 49.1065), Приоритет: high
2024-12-22 13:35:43,584 - services.optimization - INFO - Доставка ID: D6, Координаты: (55.7468, 49.1635), Приоритет: low
2024-12-22 13:35:43,586 - services.optimization - INFO - Доставка ID: D7, Координаты: (55.809, 49.13), Приоритет: medium
2024-12-22 13:35:43,588 - services.optimization - INFO - Доставка ID: D8, Координаты: (55.8222, 49.0789), Приоритет: high
2024-12-22 13:35:43,590 - services.optimization - INFO - Доставка ID: D9, Координаты: (55.792, 49.145), Приоритет: low
2024-12-22 13:35:43,592 - services.optimization - INFO - Доставка ID: D10, Координаты: (55.83, 49.15), Приоритет: medium
2024-12-22 13:35:53,785 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (600, 840), (480, 720), (540, 1020), (480, 900), (600, 840), (720, 1080), (540, 960), (480, 720), (600, 1080), (360, 780)]
2024-12-22 13:35:53,787 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 10, 20, 5, 15, 12, 25, 10, 20, 8, 5]
2024-12-22 13:35:53,789 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 2, 4, 1, 3, 2, 5, 3, 6, 2, 1]
2024-12-22 13:35:53,790 - services.optimization - INFO - Маршрутные узлы: [0, 1, 5, 8, 11, 7, 3, 13, 10, 4, 12, 6, 2, 9, 0]
2024-12-22 13:35:53,792 - services.optimization - INFO - Времена прибытия: [552, 553, 563, 600, 624, 650, 674, 686, 699, 719, 737, 751, 762, 775, 811]
2024-12-22 13:35:53,793 - services.optimization - INFO - Пропущенные узлы: []
2024-12-22 13:35:53,796 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 13:35:53,797 - services.optimization - INFO -   Склад WH1 usage=67/250, stock={'electronics': 25, 'furniture': 14, 'clothing': 24, 'food': 14}
2024-12-22 13:35:53,799 - services.optimization - INFO -   Склад WH2 usage=61/200, stock={'furniture': 15, 'food': 27, 'clothing': 9}
2024-12-22 13:35:53,800 - services.optimization - INFO -   Склад WH3 usage=43/180, stock={'electronics': 36, 'clothing': 12, 'furniture': 5}
2024-12-22 13:35:53,803 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 13:35:53,805 - services.optimization - INFO - Сгенерированный URL для Яндекс.Карт: https://yandex.ru/maps/?rtext=55.7963,49.1088~55.7974,49.1069~55.7885,49.1212~55.854,49.1065~55.8222,49.0789~55.8117,49.051~55.812,49.12~55.83,49.15~55.809,49.13~55.801,49.1106~55.792,49.145~55.7801,49.1675~55.765,49.168~55.7468,49.1635~55.7963,49.1088&mode=routes
2024-12-22 13:35:53,807 - services.optimization - INFO - Фактический порядок доставки: ['D2', 'D5', 'D8', 'D4', 'D10', 'D7', 'D1', 'D9', 'D3', 'D6']
2024-12-22 13:35:53,809 - services.optimization - INFO - Ожидаемый порядок доставки: ['D2', 'D5', 'D8', 'D1', 'D4', 'D7', 'D10', 'D3', 'D6', 'D9']
2024-12-22 13:35:53,811 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 13:35:53,812 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 13:35:53,814 - routes.logistics - INFO - Ответ отправлен: route_order=['D2', 'D5', 'D8', 'D4', 'D10', 'D7', 'D1', 'D9', 'D3', 'D6'] osm_url='https://yandex.ru/maps/?rtext=55.7963,49.1088~55.7974,49.1069~55.7885,49.1212~55.854,49.1065~55.8222,49.0789~55.8117,49.051~55.812,49.12~55.83,49.15~55.809,49.13~55.801,49.1106~55.792,49.145~55.7801,49.1675~55.765,49.168~55.7468,49.1635~55.7963,49.1088&mode=routes' message='OK'
2024-12-22 19:11:26,331 - routes.logistics - INFO - Получен запрос на /calculate-route
2024-12-22 19:11:26,332 - services.optimization - INFO - Получены данные: depot_coord=(59.9311, 30.3609) vehicle_capacity=25 deliveries=[DeliveryAddress(id='1', coord=(59.9398, 30.3146), priority='high', demand=4, items=[ItemInfo(guid='item1', count=4)], refused=False, origin_warehouse='WH1', time_window=(540, 720), service_time=15), DeliveryAddress(id='2', coord=(59.9276, 30.3374), priority='medium', demand=2, items=[ItemInfo(guid='item2', count=2)], refused=False, origin_warehouse='WH1', time_window=(480, 900), service_time=10), DeliveryAddress(id='3', coord=(59.915, 30.3456), priority='low', demand=3, items=[ItemInfo(guid='item3', count=3)], refused=False, origin_warehouse='WH2', time_window=(600, 840), service_time=12), DeliveryAddress(id='4', coord=(59.9489, 30.3892), priority='medium', demand=5, items=[ItemInfo(guid='item4', count=5)], refused=False, origin_warehouse='WH3', time_window=(720, 1080), service_time=20), DeliveryAddress(id='5', coord=(59.9371, 30.407), priority='high', demand=1, items=[ItemInfo(guid='item5', count=1)], refused=False, origin_warehouse='WH1', time_window=(300, 600), service_time=8), DeliveryAddress(id='6', coord=(59.91, 30.27), priority='low', demand=3, items=[ItemInfo(guid='item6', count=3)], refused=False, origin_warehouse='WH2', time_window=(480, 1020), service_time=10), DeliveryAddress(id='7', coord=(59.95, 30.22), priority='medium', demand=2, items=[ItemInfo(guid='item7', count=2)], refused=False, origin_warehouse='WH3', time_window=(360, 840), service_time=5), DeliveryAddress(id='8', coord=(59.97, 30.3), priority='high', demand=6, items=[ItemInfo(guid='item8', count=6)], refused=False, origin_warehouse='WH1', time_window=(600, 780), service_time=18), DeliveryAddress(id='9', coord=(59.92, 30.38), priority='low', demand=4, items=[ItemInfo(guid='item9', count=4)], refused=False, origin_warehouse='WH2', time_window=(480, 1080), service_time=15), DeliveryAddress(id='10', coord=(59.96, 30.35), priority='medium', demand=3, items=[ItemInfo(guid='item10', count=3)], refused=False, origin_warehouse='WH3', time_window=(540, 960), service_time=10)] warehouses=[Warehouse(id='WH1', coord=(59.9333, 30.3069), stock={'item1': 15, 'item2': 20, 'item5': 10, 'item8': 12}, capacity=250, usage=90), Warehouse(id='WH2', coord=(59.91, 30.32), stock={'item3': 30, 'item6': 25, 'item9': 20}, capacity=200, usage=70), Warehouse(id='WH3', coord=(59.95, 30.34), stock={'item4': 40, 'item7': 18, 'item10': 10}, capacity=180, usage=50)]
2024-12-22 19:11:26,348 - services.optimization - INFO - Доставка ID: 1, Координаты: (59.9398, 30.3146), Приоритет: high
2024-12-22 19:11:26,350 - services.optimization - INFO - Доставка ID: 2, Координаты: (59.9276, 30.3374), Приоритет: medium
2024-12-22 19:11:26,358 - services.optimization - INFO - Доставка ID: 3, Координаты: (59.915, 30.3456), Приоритет: low
2024-12-22 19:11:26,363 - services.optimization - INFO - Доставка ID: 4, Координаты: (59.9489, 30.3892), Приоритет: medium
2024-12-22 19:11:26,366 - services.optimization - INFO - Доставка ID: 5, Координаты: (59.9371, 30.407), Приоритет: high
2024-12-22 19:11:26,368 - services.optimization - INFO - Доставка ID: 6, Координаты: (59.91, 30.27), Приоритет: low
2024-12-22 19:11:26,371 - services.optimization - INFO - Доставка ID: 7, Координаты: (59.95, 30.22), Приоритет: medium
2024-12-22 19:11:26,373 - services.optimization - INFO - Доставка ID: 8, Координаты: (59.97, 30.3), Приоритет: high
2024-12-22 19:11:26,375 - services.optimization - INFO - Доставка ID: 9, Координаты: (59.92, 30.38), Приоритет: low
2024-12-22 19:11:26,378 - services.optimization - INFO - Доставка ID: 10, Координаты: (59.96, 30.35), Приоритет: medium
2024-12-22 19:11:36,770 - services.optimization - INFO - Временные окна: [(0, 1440), (0, 1440), (0, 1440), (0, 1440), (540, 720), (480, 900), (600, 840), (720, 1080), (300, 600), (480, 1020), (360, 840), (600, 780), (480, 1080), (540, 960)]
2024-12-22 19:11:36,773 - services.optimization - INFO - Время обслуживания: [0, 5, 5, 5, 15, 10, 12, 20, 8, 10, 5, 18, 15, 10]
2024-12-22 19:11:36,775 - services.optimization - INFO - Спрос: [0, 0, 0, 0, 4, 2, 3, 5, 1, 3, 2, 6, 4, 3]
2024-12-22 19:11:36,778 - services.optimization - INFO - Маршрутные узлы: [0, 8, 3, 1, 4, 11, 10, 13, 5, 9, 2, 6, 0]
2024-12-22 19:11:36,779 - services.optimization - INFO - Времена прибытия: [570, 578, 595, 606, 613, 636, 665, 683, 701, 720, 738, 748, 764]
2024-12-22 19:11:36,781 - services.optimization - INFO - Пропущенные узлы: [7, 12]
2024-12-22 19:11:36,784 - services.optimization - INFO - [handle_refusal] Текущие остатки по складам:
2024-12-22 19:11:36,786 - services.optimization - INFO -   Склад WH1 usage=77/250, stock={'item1': 11, 'item2': 18, 'item5': 9, 'item8': 6}
2024-12-22 19:11:36,791 - services.optimization - INFO -   Склад WH2 usage=64/200, stock={'item3': 27, 'item6': 22, 'item9': 20}
2024-12-22 19:11:36,796 - services.optimization - INFO -   Склад WH3 usage=45/180, stock={'item4': 40, 'item7': 16, 'item10': 7}
2024-12-22 19:11:36,800 - services.optimization - INFO - -- Конец обработки отказов --

2024-12-22 19:11:36,810 - services.optimization - INFO - Сгенерированный URL для Яндекс.Карт: https://yandex.ru/maps/?rtext=59.9311,30.3609~59.9371,30.407~59.95,30.34~59.9333,30.3069~59.9398,30.3146~59.97,30.3~59.95,30.22~59.96,30.35~59.9276,30.3374~59.91,30.27~59.91,30.32~59.915,30.3456~59.9311,30.3609&mode=routes
2024-12-22 19:11:36,815 - services.optimization - INFO - Фактический порядок доставки: ['5', '1', '8', '7', '10', '2', '6', '3']
2024-12-22 19:11:36,819 - services.optimization - INFO - Ожидаемый порядок доставки: ['1', '5', '8', '2', '7', '10', '3', '6']
2024-12-22 19:11:36,827 - services.optimization - INFO - Оптимизация успешно завершена.
2024-12-22 19:11:36,837 - routes.logistics - INFO - Результат оптимизации успешно сгенерирован
2024-12-22 19:11:36,839 - routes.logistics - INFO - Ответ отправлен: route_order=['5', '1', '8', '7', '10', '2', '6', '3'] osm_url='https://yandex.ru/maps/?rtext=59.9311,30.3609~59.9371,30.407~59.95,30.34~59.9333,30.3069~59.9398,30.3146~59.97,30.3~59.95,30.22~59.96,30.35~59.9276,30.3374~59.91,30.27~59.91,30.32~59.915,30.3456~59.9311,30.3609&mode=routes' message='OK'
